(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70ee0cc0"],{1511:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"album py-5 bg-light"},[r("div",{staticClass:"container"},[r("div",{staticClass:"card mb-3"},[r("UserProfileCard",{attrs:{"user-profile":e.userProfile,"is-followed":e.isFollowed},on:{"after-add-following":e.afterAddFollowing,"after-delete-following":e.deteleFollowing}})],1),e._m(0)])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"}),r("div",{staticClass:"col-md-8"})])}],o=(r("4de4"),r("5530")),s=(r("96cf"),r("1da1")),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{src:e.userProfile.image,width:"300px",height:"300px"}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(e._s(e.userProfile.name))]),r("p",{staticClass:"card-text"},[e._v(e._s(e.userProfile.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[e._v(e._s(e.commentRestaurantCount))]),e._v(" 已評論餐廳 ")]),r("li",[r("strong",[e._v(e._s(e.userProfile.FavoritedRestaurants.length))]),e._v(" 收藏的餐廳 ")]),r("li",[r("strong",[e._v(" "+e._s(e.userProfile.Followings.length)+" ")]),e._v(" followings (追蹤者) ")]),r("li",[r("strong",[e._v(" "+e._s(e.userProfile.Followers.length)+" ")]),e._v(" followers (追隨者) ")])]),r("div",[e.userProfile.id===e.currentUser.id?r("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"user-edit",params:{id:e.currentUser.id}}}},[e._v(" Edit ")]):e.isFollowed?e._e():r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowing(t)}}},[e._v(" 追蹤 ")]),e.userProfile.id!==e.currentUser.id&e.isFollowed?r("form",{staticStyle:{display:"contents"},attrs:{action:"/following/1?_method=DELETE",method:"POST"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.deteleFollowing(t)}}},[r("button",{staticClass:"btn btn-danger",attrs:{type:"submit"}},[e._v("取消追蹤")])]):e._e()],1)])])])},u=[],l=(r("d81d"),r("b0c0"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("2f62")),c=r("4cce"),f=r("2fa3"),d={props:{userProfile:{type:Object,required:!0},isFollowed:{type:Boolean,required:!0}},computed:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["currentUser"])),{},{commentRestaurantCount:function(){var e=new Set(this.userProfile.Comments.map((function(e){return e.Restaurant.id})));return e.size}}),methods:{addFollowing:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$route.params.id,t.next=4,c["a"].addFollowing({userId:r});case 4:if(n=t.sent,i=n.data,"success"===i.status){t.next=8;break}throw new Error(i.message);case 8:e.$emit("after-add-following",{Followship:"",createdAt:"2019-07-30T16:24:55.204Z",email:e.currentUser.email,id:e.currentUser.id,image:e.currentUser.image,isAdmin:!1,name:e.currentUser.name,password:"$2a$10$oNyp9cr8jG7NulbUr56g6e3yvwnttFkoBAmtUYAeQuXkcdFz0Ko6y",updatedAt:"f"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),f["a"].fire({icon:"error",title:"無法加入追蹤，請稍候再試"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},deteleFollowing:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$route.params.id,t.next=4,c["a"].deleteFollowing({userId:r});case 4:if(n=t.sent,i=n.data,"success"===i.status){t.next=8;break}throw new Error(i.message);case 8:e.$emit("after-delete-following",e.currentUser.id),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),f["a"].fire({icon:"error",title:"無法取消追蹤，請稍候再試"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},v=d,p=r("2877"),h=Object(p["a"])(v,a,u,!1,null,null,null),w=h.exports,m={components:{UserProfileCard:w},data:function(){return{userProfile:{},isFollowed:!1}},created:function(){var e=this.$route.params.id;this.fetchUser(e)},methods:{fetchUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].get({userId:e});case 3:n=r.sent,i=n.data,t.userProfile=i.profile,t.isFollowed=i.isFollowed,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),f["a"].fire({icon:"error",title:"無法取得用戶資料，請稍後再試"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},afterAddFollowing:function(e){var t=Object(o["a"])({},e);this.userProfile.Followers.push(t),this.isFollowed=!0},deteleFollowing:function(e){this.userProfile.Followers=this.userProfile.Followers.filter((function(t){return t.id!==e})),this.isFollowed=!1}},beforeRouteUpdate:function(e,t,r){var n=e.params.id;this.fetchUser(n),r()}},g=m,b=Object(p["a"])(g,n,i,!1,null,null,null);t["default"]=b.exports},"1c7e":function(e,t,r){var n=r("b622"),i=n("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(u){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(u){}return r}},2266:function(e,t,r){var n=r("825a"),i=r("e95a"),o=r("50c4"),s=r("0366"),a=r("35a1"),u=r("9bdd"),l=function(e,t){this.stopped=e,this.result=t},c=e.exports=function(e,t,r,c,f){var d,v,p,h,w,m,g,b=s(t,r,c?2:1);if(f)d=e;else{if(v=a(e),"function"!=typeof v)throw TypeError("Target is not iterable");if(i(v)){for(p=0,h=o(e.length);h>p;p++)if(w=c?b(n(g=e[p])[0],g[1]):b(e[p]),w&&w instanceof l)return w;return new l(!1)}d=v.call(e)}m=d.next;while(!(g=m.call(d)).done)if(w=u(d,b,g.value,c),"object"==typeof w&&w&&w instanceof l)return w;return new l(!1)};c.stop=function(e){return new l(!0,e)}},2626:function(e,t,r){"use strict";var n=r("d066"),i=r("9bf2"),o=r("b622"),s=r("83ab"),a=o("species");e.exports=function(e){var t=n(e),r=i.f;s&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},6062:function(e,t,r){"use strict";var n=r("6d61"),i=r("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(e,t,r){"use strict";var n=r("9bf2").f,i=r("7c73"),o=r("e2cc"),s=r("0366"),a=r("19aa"),u=r("2266"),l=r("7dd0"),c=r("2626"),f=r("83ab"),d=r("f183").fastKey,v=r("69f3"),p=v.set,h=v.getterFor;e.exports={getConstructor:function(e,t,r,l){var c=e((function(e,n){a(e,c,t),p(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=n&&u(n,e[l],e,r)})),v=h(t),w=function(e,t,r){var n,i,o=v(e),s=m(e,t);return s?s.value=r:(o.last=s={index:i=d(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),f?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},m=function(e,t){var r,n=v(e),i=d(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return o(c.prototype,{clear:function(){var e=this,t=v(e),r=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,r=v(t),n=m(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),f?r.size--:t.size--}return!!n},forEach:function(e){var t,r=v(this),n=s(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),o(c.prototype,r?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return w(this,0===e?0:e,t)}}:{add:function(e){return w(this,e=0===e?0:e,e)}}),f&&n(c.prototype,"size",{get:function(){return v(this).size}}),c},setStrong:function(e,t,r){var n=t+" Iterator",i=h(t),o=h(n);l(e,t,(function(e,t){p(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),c(t)}}},"6d61":function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("94ca"),s=r("6eeb"),a=r("f183"),u=r("2266"),l=r("19aa"),c=r("861d"),f=r("d039"),d=r("1c7e"),v=r("d44e"),p=r("7156");e.exports=function(e,t,r){var h=-1!==e.indexOf("Map"),w=-1!==e.indexOf("Weak"),m=h?"set":"add",g=i[e],b=g&&g.prototype,x=g,y={},F=function(e){var t=b[e];s(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(w&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return w&&!c(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(w&&!c(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(o(e,"function"!=typeof g||!(w||b.forEach&&!f((function(){(new g).entries().next()})))))x=r.getConstructor(t,e,h,m),a.REQUIRED=!0;else if(o(e,!0)){var _=new x,k=_[m](w?{}:-0,1)!=_,C=f((function(){_.has(1)})),E=d((function(e){new g(e)})),P=!w&&f((function(){var e=new g,t=5;while(t--)e[m](t,t);return!e.has(-0)}));E||(x=t((function(t,r){l(t,x,e);var n=p(new g,t,x);return void 0!=r&&u(r,n[m],n,h),n})),x.prototype=b,b.constructor=x),(C||P)&&(F("delete"),F("has"),h&&F("get")),(P||k)&&F(m),w&&b.clear&&delete b.clear}return y[e]=x,n({global:!0,forced:x!=g},y),v(x,e),w||r.setStrong(x,e,h),x}},bb2f:function(e,t,r){var n=r("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d81d:function(e,t,r){"use strict";var n=r("23e7"),i=r("b727").map,o=r("1dde"),s=r("ae40"),a=o("map"),u=s("map");n({target:"Array",proto:!0,forced:!a||!u},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},f183:function(e,t,r){var n=r("d012"),i=r("861d"),o=r("5135"),s=r("9bf2").f,a=r("90e3"),u=r("bb2f"),l=a("meta"),c=0,f=Object.isExtensible||function(){return!0},d=function(e){s(e,l,{value:{objectID:"O"+ ++c,weakData:{}}})},v=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,l)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[l].objectID},p=function(e,t){if(!o(e,l)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[l].weakData},h=function(e){return u&&w.REQUIRED&&f(e)&&!o(e,l)&&d(e),e},w=e.exports={REQUIRED:!1,fastKey:v,getWeakData:p,onFreeze:h};n[l]=!0}}]);
//# sourceMappingURL=chunk-70ee0cc0.7bff739c.js.map